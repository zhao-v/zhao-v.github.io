<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Hadoop 集群搭建（1 主 2 从） | 灯火不休时(blog.dhbxs.top)</title><meta name="keywords" content="Hadoop"><meta name="author" content="灯火不休时"><meta name="copyright" content="灯火不休时"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="耗时将近 1 天，终于搭好了 Hadoop 集群，现做教程分享出来。 本文基于 MacOS Big Sur 11.2.2 操作系统，配置 3 台 CentOS 7 虚拟机，部署 Hadoop-2.7.7 所有安装文件集合下载：百度网盘 提取码：o7k4  安装 VMWare Fusion 以及 TermiusSSH 客户端 VMware Fusion: 官网 https:&#x2F;&#x2F;www.vmware"><meta property="og:type" content="article"><meta property="og:title" content="Hadoop 集群搭建（1 主 2 从）"><meta property="og:url" content="https://blog.dhbxs.top/posts/d06540f2.html"><meta property="og:site_name" content="灯火不休时(blog.dhbxs.top)"><meta property="og:description" content="耗时将近 1 天，终于搭好了 Hadoop 集群，现做教程分享出来。 本文基于 MacOS Big Sur 11.2.2 操作系统，配置 3 台 CentOS 7 虚拟机，部署 Hadoop-2.7.7 所有安装文件集合下载：百度网盘 提取码：o7k4  安装 VMWare Fusion 以及 TermiusSSH 客户端 VMware Fusion: 官网 https:&#x2F;&#x2F;www.vmware"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.cleo.com/sites/default/files/2018-10/logo_hadoop_module-11.png"><meta property="article:published_time" content="2021-04-18T07:54:06.000Z"><meta property="article:modified_time" content="2021-05-03T14:47:52.911Z"><meta property="article:author" content="灯火不休时"><meta property="article:tag" content="Hadoop"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.cleo.com/sites/default/files/2018-10/logo_hadoop_module-11.png"><link rel="shortcut icon" href="https://gitee.com/dhbxs/blogImage/raw/master/img/favicon.png"><link rel="canonical" href="https://blog.dhbxs.top/posts/d06540f2"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//hm.baidu.com"><meta name="baidu-site-verification" content="X6s64DoQdWRg4fsX"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3aa28f194a9779da8550ac15e7d4eb0d";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:{limitCount:150,languages:{author:"作者: 灯火不休时",link:"链接: ",source:"来源: 灯火不休时(blog.dhbxs.top)",info:"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#121212",position:"bottom-left"},source:{jQuery:"https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js",justifiedGallery:{js:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js",css:"https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css"},fancybox:{js:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js",css:"https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"}},isPhotoFigcaption:!1,islazyload:!0,isanchor:!0}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2021-05-03 22:47:52"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const a=864e5*o,c={value:t,expiry:(new Date).getTime()+a};localStorage.setItem(e,JSON.stringify(c))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise((t,o)=>{const a=document.createElement("script");a.src=e,a.async=!0,a.onerror=o,a.onload=a.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(a.onload=a.onreadystatechange=null,t())},document.head.appendChild(a)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme"),o=window.matchMedia("(prefers-color-scheme: dark)").matches,a=window.matchMedia("(prefers-color-scheme: light)").matches,c=window.matchMedia("(prefers-color-scheme: no-preference)").matches,n=!o&&!a&&!c;if(void 0===t){if(a)activateLightMode();else if(o)activateDarkMode();else if(c||n){const e=(new Date).getHours();e<=6||e>=18?activateDarkMode():activateLightMode()}window.matchMedia("(prefers-color-scheme: dark)").addListener((function(e){void 0===saveToLocal.get("theme")&&(e.matches?activateDarkMode():activateLightMode())}))}else"light"===t?activateLightMode():activateDarkMode();const i=saveToLocal.get("aside-status");void 0!==i&&("hide"===i?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"))})(window)</script><link rel="stylesheet" href="//at.alicdn.com/t/font_1748640_sp0cm4dr4v.css"><link rel="stylesheet" href="/css/footer.css"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="灯火不休时(blog.dhbxs.top)" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201020000120.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 小伙伴</span></a></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fas fa-heart"></i><span> 聊一聊</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">灯火不休时(blog.dhbxs.top)</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 小伙伴</span></a></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fas fa-heart"></i><span> 聊一聊</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Hadoop 集群搭建（1 主 2 从）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-04-18T07:54:06.000Z" title="发表于 2021-04-18 15:54:06">2021-04-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-05-03T14:47:52.911Z" title="更新于 2021-05-03 22:47:52">2021-05-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE%E4%B8%8E%E4%BA%91%E8%AE%A1%E7%AE%97/">大数据与云计算</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>19分钟</span></span></div></div></div><article class="post-content" id="article-container"><blockquote><p>耗时将近 1 天，终于搭好了 Hadoop 集群，现做教程分享出来。</p><p>本文基于 MacOS Big Sur 11.2.2 操作系统，配置 3 台 CentOS 7 虚拟机，部署 Hadoop-2.7.7</p><p>所有安装文件集合下载：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1UfDwP3HGirHUVrPeVuXYQw">百度网盘</a> 提取码：o7k4</p></blockquote><h2 id="安装-VMWare-Fusion-以及-TermiusSSH-客户端"><a href="#安装-VMWare-Fusion-以及-TermiusSSH-客户端" class="headerlink" title="安装 VMWare Fusion 以及 TermiusSSH 客户端"></a>安装 VMWare Fusion 以及 TermiusSSH 客户端</h2><ul><li><p><code>VMware Fusion</code>: 官网 <a target="_blank" rel="noopener" href="https://www.vmware.com/cn/products/fusion/fusion-evaluation.html">https://www.vmware.com/cn/products/fusion/fusion-evaluation.html</a></p></li><li><p><code>Termius SSH</code>: 官网 <a target="_blank" rel="noopener" href="https://www.termius.com/mac-os">https://www.termius.com/mac-os</a></p><p>我这里是通过这 2 款工具来搭建虚拟机并支持后续操作的，也可以使用其他虚拟机软件和 SSH 客户端，我是没找到 Mac 平台上能达到像 Windows 平台的 Xshell 那样的 SSH 工具。另外 Mac 也可以不使用第三方 SSH 客户端，毕竟自带的<code>iterm2</code>已经很强大了。</p><p>文末有用 mac 自带的 iterm 终端 SSH 连接 Linux 主机的命令。</p><p>安装以上软件没什么难度，基本下一步就好。</p></li></ul><hr><h2 id="在虚拟机中安装-CentOS-7"><a href="#在虚拟机中安装-CentOS-7" class="headerlink" title="在虚拟机中安装 CentOS 7"></a>在虚拟机中安装 CentOS 7</h2><ul><li><p>本教程所使用的虚拟机是用这个镜像安装的 <code>CentOS-7-x86_64-Minimal-2009.iso</code></p><p>下载地址：<a target="_blank" rel="noopener" href="http://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/">http://mirrors.aliyun.com/centos/7.9.2009/isos/x86_64/</a></p><p>然后选择和我一样的镜像版本下载下来。</p><blockquote><p>之前刚一开始是用的 CentOS 8，而且是全量安装，包含各种工具包，还有 GUI 图形界面，要是同时开三台虚拟机的话，16G 内存也不够，主要是 GUI 图形化窗口消耗了大量内存资源，导致系统卡顿，所以干脆就选择最小化安装了。而且安装后也不需要卸载系统自带的 OpenJDK，关键是安装也很快。</p><p>Linux 玩的就是命令，要什么图形啊，服务器不都是跑的最小内核么？</p></blockquote></li></ul><ol><li><p>打开 VMware Fusion，如下图，选择新建。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://i.loli.net/2021/04/18/dEqXbynUBJi7RDY.png" alt="dEqXbynUBJi7RDY"></p></li><li><p>选择从光盘或映像中安装，然后点继续。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418205811051.png" alt="image-20210418205811051"></p></li><li><p>点击使用其他光盘或光盘映像。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418205919425.png" alt="image-20210418205919425"></p></li><li><p>在弹出的对话框中，选择刚刚下载的 CentOS 7 iso 镜像文件，然后点击打开。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418210055428.png" alt="image-20210418210055428"></p></li><li><p>返回后，点击继续。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418210138690.png" alt="image-20210418210138690"></p></li><li><p>选择 UEFI 引导，毕竟现在的机子都是 UEFI 了，传统引导很快就会被淘汰的，不过虚拟机选啥其实无所谓，看心情喽！</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418210251260.png" alt="image-20210418210251260"></p></li><li><p>然后点击自定设置。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418210430002.png" alt="image-20210418210430002"></p></li><li><p>选择一个自己觉得合适的位置，更改个名字，将虚拟机保存，点击存储。<code>最好放到固态硬盘中，加载速度会快些</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418210625760.png" alt="image-20210418210625760"></p></li><li><p>在弹出的对话框中，选择处理器和内存，然后更改内存至少为 <code>2048M</code> 。我因为 16G 内存，所以设置了 4G，大一点系统响应速度快一些，如果电脑内存是 8G 的，那么最好设置 <code>2048M</code> 内存，Linux 应为没有图形化界面所以比较省内存，其实 <code>2048M</code> 足够了。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418211124299.png" alt="image-20210418211124299"></p></li><li><p>然后点击显示全部，返回顶层页面，点击硬盘。将硬盘大小设置为 <code>60G</code> , 这里视情况而定，一般至少 20G，推荐 60G，点击应用。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418211414178.png" alt="image-20210418211414178"></p></li><li><p>最后点击虚拟机的运行按钮，打开虚拟机。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418211546728.png" alt="image-20210418211546728"></p></li><li><p>选择第一项，安装 CentOS 7，然后回车等待加载。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418211650207.png" alt="image-20210418211650207"></p></li><li><p>加载完成后，进入安装界面，语言选择中文简体，点击继续。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418211905841.png" alt="image-20210418211905841"></p></li><li><p>然后点击安装位置，以确认全盘安装。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418212009893.png" alt="image-20210418212009893"></p></li><li><p>点击左上角的完成。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418212056274.png" alt="image-20210418212056274"></p></li><li><p>点击网络和主机名，配置网络和主机名。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418212153419.png" alt="image-20210418212153419"></p></li><li><p>按下图示操作，记得拍照记录图示信息。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418212658852.png" alt="image-20210418212658852"></p></li><li><p>然后点击 IPv4 设置，将方法改为手动，目的是为了固定 IP 地址，方便以后远程连接以及 <code>Hadoop</code> 集群间的通信。然后点击 Add 添加地址，将地址栏填为刚刚拍照记录下来的 <code>IPv4</code> 地址，子网掩码同样填刚刚拍下来的子网掩码，网关其实就是路由器的 IP 了，这里填写刚刚拍下来的默认路由的 IP 地址。继续修改 DNS 服务器，我这里用阿里云的公共 DNS，将 <code>223.5.5.5,223.6.6.6</code> 复制粘贴到 DNS 服务器那一栏，然后勾选需要 IPv4 地址完成这个链接，最后点保存。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418213139120.png" alt="image-20210418213139120"></p></li><li><p>将主机名改为 master，我们这里现配置 master 主机，其余节点后面直接复制虚拟机即可，然后点应用。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418213834765.png" alt="image-20210418213834765"></p></li><li><p>按下图检查配置是否有误，无误请点击完成。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418214010400.png" alt="image-20210418214010400"></p></li><li><p>然后点击开始安装。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418214053618.png" alt="image-20210418214053618"></p></li><li><p>在安装的同时，设置 ROOT 用户和密码，点击 ROOT 密码，进入设置。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418214120168.png" alt="image-20210418214120168"></p></li><li><p>务必记住此密码，我这里设置为 <code>000000</code> 学习使用，简单点无所谓，然后点击 2 次完成，因为密码过于简单，系统会有提醒。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418214307450.png" alt="image-20210418214307450"></p></li><li><p>安装完成，点击重启，在 master login 后输入用户名 <code>root</code> ，然后回车，输入密码 <code>000000</code>。这里密码输入是不显示的，不要惊讶，以为键盘坏了！！！</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418215056395.png" alt="image-20210418215056395"></p></li><li><p>当出现下图所示，则表示安装成功。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418215151079.png" alt="image-20210418215151079"></p></li><li><p>然后输入以下命令，测试虚拟机是否与互联网相连。</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ping www.baidu.com</span><br></pre></td></tr></table></figure><p>出现如下图所示则表示外网链接成功：</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210418215850418.png" alt="image-20210418215850418"></p><p>按 <code>ctrl</code> + <code>c</code> 结束 ping 命令。</p></li><li><p>至此，CentOS 安装成功。</p></li></ol><hr><h2 id="配置-CentOS-7"><a href="#配置-CentOS-7" class="headerlink" title="配置 CentOS 7"></a>配置 CentOS 7</h2><ol><li><p>现在是联网状态，最好更新一下yum源，运行命令 <code>yum -y update</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428222252678.png" alt="image-20210428222252678"></p></li><li><p>当看到complete提示信息时表明yum更新成功，这些都属于刚安装Linux系统的常规操作。如下图所示：</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428222811494.png" alt="image-20210428222811494"></p></li><li><p>接下来关闭系统防火墙，不要担心，现在系统不再公网上，关闭防火墙一般也是不会被黑进来的，放心大胆的关闭吧，而且Hadoop集群间后面通信过程中也是要求关掉防火墙的，局域网内通信没必要开防火墙。</p><ul><li>临时关闭防火墙 <code>systemctl stop firewalld.service</code></li><li>永久关闭防火墙 <code>systemctl disable firewalld.service</code></li></ul><blockquote><p>先输入临时关闭防火墙的命令，将当前系统的防火墙关闭，然后再输入永久关闭防火墙命令，这个是防止重启系统防火墙自动开启。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428223749872.png" alt="image-20210428223749872"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428223840012.png" alt="image-20210428223840012"></p></li><li><p>接着关闭Linux系统安全内核SELinux。输入命令 <code>vi /etc/selinux/config</code> ，进入编辑selinux的配置文件。</p><blockquote><p>这里作为补充，说明一下vi/vim命令，vi是编辑文本的命令，后面跟文本的路径，这条命令的意思是在终端中编辑selinux下的config文件，回车后会看到如下图所示页面。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428224424133.png" alt="image-20210428224424133"></p><p>目前是查看状态不能编辑，按下键盘上的字母键 <code>i</code> ，才会进入编辑模式，如下图所示，（左下角会提示当前为INSERT状态，表明可修改内容）：</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428224656486.png" alt="image-20210428224656486"></p><p>找到 <code>SELINUX=enforcing</code> 这一行，将 <code>=</code> 后面的 <code>enforcing</code> 修改为 <code>disabled</code> 。然后按下键盘的 <code>esc</code> 键，如下图所示：</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428225227902.png" alt="image-20210428225227902"></p><p>注意当按下esc键后，左下角的 <code>insert</code> 会消失，然后按下键盘的 <code>:</code> 键，进入指令状态，如下图所示：</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428225425870.png" alt="image-20210428225425870"></p><p>会发现左下角有 <code>:</code> 显示，证明现在是指令状态，然后输入 <code>wq</code> ，<code>w</code> 指令表示写入文件，<code>q</code> 表示退出 <code>vi</code> 编辑模式，如下图所示：</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428225634048.png" alt="image-20210428225634048"></p><p>然后按回车，执行刚刚的指令，就回到了初始的命令界面，然后我们检查一下刚才的操作，输入 <code>cat /etc/selinux/config</code> 命令，查看配置文件是否被正常修改，如下图所示。（养成编辑后就检查的习惯后面会省很多事）</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428230018418.png" alt="image-20210428230018418"></p></blockquote></li><li><p>输入 <code>reboot</code> 回车重启系统，使以上命令生效。</p></li><li><p>重启后输入 <code>/usr/sbin/sestatus -v</code> 查看SELinux是否被禁用。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428231223773.png" alt="image-20210428231223773"></p></li><li><p>输入 <code>yum install vim -y</code> 安装 <code>vim</code> 编辑器，这个和 <code>vi</code> 命令一样，是 <code>vi</code> 命令的增强版，有语法高亮功能，对后面修改Hadoop配置会有所帮助。</p></li><li><p>修改hosts文件，将后面会配置的虚拟机的ip先添加到hosts文件中。</p><p>输入 <code>vim /etc/hosts</code> 编辑hosts文件</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428232342194.png" alt="image-20210428232342194"></p><p>这里的ip地址要和之前安装虚拟机时拍照所得的ip的网段要一致，第一个master主机为当前虚拟机的ip，后面的s1，s2分别在ip地址的末尾加1，我这里master的ip就是安装虚拟机时拍照所记录的ip，按照当时的ip配置master即可，然后将s1，s2的ip也添加到hosts文件中，我这里分别是 <code>.7</code> 和 <code>.8</code> 。前面的 <code>192.168.141</code> 要和master主机相同，这样3台主机才会在同一个网段内，才能ping通。</p><p>修改完成后，保存退出。</p></li><li><p>新建Hadooptools文件夹，后面所有文件均在该文件夹下存放。</p><p>在root用户根目录新建Hadooptools文件夹，依次输入以下命令：</p><p><code>cd /root</code></p><p><code>mkdir Hadooptools</code></p><p><code>cd Hadooptools</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/TFI2xu.png" alt="TFI2xu"></p></li><li><p>下载本文开始所提供的百度网盘资料</p></li><li><p>通过mac自带的terminal上传到服务器</p><p>打开Mac终端，然后输入以下命令，注意路径和ip换成自己的</p><p><code>sudo scp /Users/wcooper/Downloads/jdk-8u171-linux-x64.tar.gz root@192.168.141.6:/root/Hadooptools/</code></p><p><code>sudo scp /Users/wcooper/Downloads/jdk-8u171-linux-x64.tar.gz root@192.168.141.6:/root/Hadooptools/</code></p><p>这里上传Hadoop和jdk的安装包，<code>scp</code> 命令用法如下：</p><p><code>scp local_file remote_username@remote_ip:remote_folder</code></p><p><code>local_file</code> 在这里就是下载到的文件路径，直接将文件拖到终端里就会自动填入路径，我这里是在<code>Downloads</code>文件夹内。后面接着远程主机要连接的用户名和IP地址或主机名，因为我们这里没有在mac的host文件中配置远程主机，所以直接用ip即可，用户名和ip之间用@隔开，然后冒号后跟上要存在远程主机的那个目录的路径即可，这里统一用<code>/root/Hadooptools/</code></p><p>在执行命令中，会问到是否连接，输入yes同意后回车即可，然后输入root用户的密码回车，同样这里的密码输入也是不显示的，当看到进度变为100%，即表示上传成功，如下图：</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/CxG1Cc.png" alt="CxG1Cc"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/iHCDCb.png" alt="iHCDCb"></p></li><li><p>回到虚拟机，cd到Hadooptools文件夹,然后查看是否有刚刚上传的文件：</p><p><code>cd /root/Hadooptools</code></p><p><code>ls</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/nCMKUn.png" alt="nCMKUn"></p></li><li><p>分别解压2个压缩包：</p><p><code>tar -zxvf hadoop-2.7.7.tar.gz</code></p><p><code>tar -zxvf jdk-8u171-linux-x64.tar.gz</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/cUJVrh.png" alt="cUJVrh"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/kxrduZ.png" alt="kxrduZ"></p></li><li><p>安装jdk</p><p>先cd到root用户根目录</p><p><code>cd ~</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210502202820299.png" alt="image-20210502202820299"></p><p>然后用 <code>vim</code> 编辑 <code>.bash_profile</code></p><p><code>vim .bash_profile</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/8IQkjL.png" alt="8IQkjL"></p><p>将以下内容添加到文件中：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/root/Hadooptools/jdk1.8.0_171</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$JAVA_HOME</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/8KB2KQ.png" alt="8KB2KQ"></p><p>保存后，输入以下命令使修改的配置生效：</p><p><code>source .bash_profile</code></p><p>然后输入<code>java -version</code> 查看java版本，检验安装是否成功，如果能出现下图所示，即表示配置成功。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/IWXE1j.png" alt="IWXE1j"></p></li><li><p>至此centos 7 配置完毕，准备关机复制虚拟机，组成3台虚拟机集群。</p><p>输入 <code>shutdown now</code> 立即关闭虚拟机</p></li></ol><hr><h2 id="复制虚拟机，完善ip与主机名配置"><a href="#复制虚拟机，完善ip与主机名配置" class="headerlink" title="复制虚拟机，完善ip与主机名配置"></a>复制虚拟机，完善ip与主机名配置</h2><ol><li><p>将我们目前的虚拟机名字修改为 <code>master</code> 方便识别，如下图所示（右键点击虚拟机名称，然后点击重命名）：</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428233425241.png" alt="image-20210428233425241"></p></li><li><p>之后右键点击 <code>master</code> 然后点 <code>创建完整克隆</code> ，复制我们当前的虚拟机2次，将复制得到的虚拟机分别命名为 <code>s1</code>， <code>s2</code> ，如下图所示：</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428233812987.png" alt="image-20210428233812987"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210428234023385.png" alt="image-20210428234023385"></p></li><li><p>将3台虚拟机依次启动，然后修改ip</p><p>先进入s1虚拟机，然后输入以下命令，编辑网络配置文件：</p><p><code>vim /etc/sysconfig/network-scripts/ifcfg-ens33</code></p><p>将其ip设置为 <code>192.168.141.7</code> ，保存后，输入 <code>service network restart</code> 使配置生效。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/ZX0tqk.png" alt="ZX0tqk"></p><p>同样的命令配置好s2，配置其ip地址为 <code>192.168.141.8</code> ，然后保存，输入命令使配置生效。</p><p>这里的ip地址与安装Linux系统时拍照记录的ip地址有关，前面的 <code>192.168.141</code> 与装系统时的ip地址完全一致，后面一位和上文<a href="#%E9%85%8D%E7%BD%AE-CentOS-7">配置centos7</a>里的第8小步一致，配置的hosts文件保持一致。</p></li><li><p>接下来修改主机名，输入以下命令：</p><p>S1: <code>hostnamectl set-hostname s1</code></p><p>S2: <code>hostnamectl set-hostname s2</code></p><p>完成后分别在s1，s2做用户登出，输入命令：</p><p><code>logout</code></p><p>然后再输入用户名root，密码，登入系统，这时会看到如下图所示位置已经变成了 <code>root@s1</code>，s2。说明主机名修改成功。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/Qb9LIG.png" alt="Qb9LIG"></p></li><li><p>分别测试是否能ping通</p><p>在 <code>master</code> 主机上分别输入以下命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ping master</span><br><span class="line">ping s1</span><br><span class="line">ping s2</span><br></pre></td></tr></table></figure><p>如果能正确收到数据包，说明master与s1，s2能正常连接</p><p>接下来依次在s1，s2上分别做以上验证，保证能够正常ping通即可。</p></li></ol><hr><h2 id="使用termius连接3台虚拟机"><a href="#使用termius连接3台虚拟机" class="headerlink" title="使用termius连接3台虚拟机"></a>使用termius连接3台虚拟机</h2><ol><li><p>打开termius，选择新建group</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/ngAOCFBEfIQrjPl.png" alt="image-20210503104915700"></p></li><li><p>填写group名，这里以hadoop集群为例，然后点击save保存。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/image-20210503105245063.png" alt="termius中Hadoop-group"></p></li><li><p>双击进入刚刚新建的group</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/855CbU.png" alt="855CbU"></p></li><li><p>点击新建host，依次新建master、s1、s2，设置好ip并输入用户名密码即可，然后点击save保存</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/X6s6yq.png" alt="X6s6yq"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/QocAY1.png" alt="QocAY1"></p></li><li><p>双击新建的host，然后选择add and continue 即可成功连接到虚拟机</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/DBaiX6.png" alt="DBaiX6"></p></li><li><p>成功连接3台虚拟机后，命令就可以直接在这里输入，不必再从虚拟机的页面里输入了，但是虚拟机要保持开机状态，关机就没办法连接了。</p></li></ol><hr><h2 id="制作免密码登陆"><a href="#制作免密码登陆" class="headerlink" title="制作免密码登陆"></a>制作免密码登陆</h2><ol><li><p>在termius中打开与三台虚拟机的连接，在master中输入以下命令：</p><p><code>ssh-keygen -t rsa</code></p><p>然后一路按回车，直到命令运行结束。同样操作，在s1，s2中依次执行一遍。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/b3wGzH.png" alt="b3wGzH"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/qRP4bV.png" alt="qRP4bV"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/UQRNBd.png" alt="UQRNBd"></p></li><li><p>在master依次输入以下命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssh-copy-id master</span><br><span class="line">ssh-copy-id s1</span><br><span class="line">ssh-copy-id s2</span><br></pre></td></tr></table></figure><p>然后根据提示输入master，s1，s2的密码。这里是为了实现master通过ssh登陆s1，s2和自己免密。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/ec2nZq.png" alt="ec2nZq"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/rOs2nm.png" alt="rOs2nm"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/UzEJK7.png" alt="UzEJK7"></p></li><li><p>在s1中依次输入以下命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh-copy-id master</span><br><span class="line">ssh-copy-id s2</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/ljrYR9.png" alt="ljrYR9"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/pxVoY0.png" alt="pxVoY0"></p></li><li><p>在s2中依次输入以下命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sh-copy-id master</span><br><span class="line">ssh-copy-id s1</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/6MnztU.png" alt="6MnztU"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/Y8gsj7.png" alt="Y8gsj7"></p></li><li><p>通过ssh命令测试互相登陆，如果相互登陆都不需要密码的话，表示免密码登陆设置成功。</p><p>测试命令：</p><p><code>ssh 主机名</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/eYpTWi.png" alt="eYpTWi"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/sgaWcD.png" alt="sgaWcD"></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/wMg0uF.png" alt="wMg0uF"></p><hr></li></ol><h2 id="配置时间同步"><a href="#配置时间同步" class="headerlink" title="配置时间同步"></a>配置时间同步</h2><ol><li><p>在master中，输入命令：<code>crontab -e</code></p></li><li><p>输入：<code>0 1 * * * /usr/sbin/ntpdate cn.pool.ntp.org</code> ，然后保存退出。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/khvsr1.png" alt="khvsr1"></p></li><li><p>输入命令 <code>clock</code> 检查时间是否正确</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/hnYnD2.png" alt="hnYnD2"></p></li><li><p>其余2台虚拟机重复上述操作</p></li></ol><hr><h2 id="配置-Hadoop"><a href="#配置-Hadoop" class="headerlink" title="配置 Hadoop"></a>配置 Hadoop</h2><blockquote><p>以下修改操作全部在master上进行，也就是只修改master里的文件，然后将master上的文件全部复制到s1，s2上即可。</p></blockquote><h3 id="修改hadoop-env-sh"><a href="#修改hadoop-env-sh" class="headerlink" title="修改hadoop-env.sh"></a>修改hadoop-env.sh</h3><ol><li><p>cd到 <code>hadoop-2.7.7</code> 文件夹下</p><p><code>cd /root/Hadooptools/hadoop-2.7.7/etc/hadoop/</code></p></li><li><p>输入命令，修改 <code>hadoop-env.sh</code></p><p><code>vim hadoop-env.sh</code></p><p>将原来export JAVA_HOME那一项修改为以下值（指明本机JAVA_HOME的路径），然后wq保存退出：</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># The java implementation to use.</span></span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/root/Hadooptools/jdk1.8.0_171</span><br></pre></td></tr></table></figure></li></ol><h3 id="修改yarn-env-sh"><a href="#修改yarn-env-sh" class="headerlink" title="修改yarn-env.sh"></a>修改yarn-env.sh</h3><ol><li><p>cd到 <code>hadoop-2.7.7</code> 文件夹下</p><p><code>cd /root/Hadooptools/hadoop-2.7.7/etc/hadoop/</code></p></li><li><p>输入命令，修改 <code>yarn-env.sh</code></p><p><code>vim yarn-env.sh</code></p><p>同样修改 <code>JAVA_HOME</code> ，然后wq保存退出</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="comment"># some Java parameters</span></span><br><span class="line"><span class="comment"># export JAVA_HOME=/home/y/libexec/jdk1.6.0/</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$JAVA_HOME</span>&quot;</span> != <span class="string">&quot;&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">  <span class="comment">#echo &quot;run java in $JAVA_HOME&quot;</span></span><br><span class="line">  JAVA_HOME=/root/Hadooptools/jdk1.8.0_171</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/HvjObK.png" alt="HvjObK"></p></li></ol><h3 id="修改core-site-xml"><a href="#修改core-site-xml" class="headerlink" title="修改core-site.xml"></a>修改core-site.xml</h3><ol><li><p>cd到 <code>hadoop-2.7.7</code> 文件夹下</p><p><code>cd /root/Hadooptools/hadoop-2.7.7/etc/hadoop/</code></p></li><li><p>输入命令，修改 <code>core-site.xml</code></p><p><code>vim core-site.xml</code></p></li><li><p>将以下内容复制粘贴到文件中，然后保存退出</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.default.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://master:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">description</span>&gt;</span>配置NameNode的URL<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--用来指定hadoop运行时产生的存放目录 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>/root/Hadooptools/hadoop-tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/p3cauw.png" alt="p3cauw"></p><p>这里将hadoop运行时的临时文件存放目录设置为/root/Hadooptools/hadoop-tmp，目前系统中是没有这个目录的，后面需要新建这个目录。</p></li></ol><h3 id="修改hdfs-site-xml"><a href="#修改hdfs-site-xml" class="headerlink" title="修改hdfs-site.xml"></a>修改hdfs-site.xml</h3><ol><li><p>cd到 <code>hadoop-2.7.7</code> 文件夹下</p><p><code>cd /root/Hadooptools/hadoop-2.7.7/etc/hadoop/</code></p></li><li><p>输入命令，修改 <code>hdfs-site.xml</code></p><p><code>vim hdfs-site.xml</code></p></li><li><p>将以下内容添加到文件，然后保存退出：</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/KI0reH.png" alt="KI0reH"></p></li></ol><h3 id="修改mapred-site-xml"><a href="#修改mapred-site-xml" class="headerlink" title="修改mapred-site.xml"></a>修改mapred-site.xml</h3><ol><li><p>cd到 <code>hadoop-2.7.7</code> 文件夹下</p><p><code>cd /root/Hadooptools/hadoop-2.7.7/etc/hadoop/</code></p></li><li><p>输入命令，修改 <code>mapred-site.xml</code></p><p><code>vim mapred-site.xml</code></p></li><li><p>将以下内容复制粘贴到文件中，保存退出</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot;?&gt;</span></span><br><span class="line"><span class="meta">&lt;?xml-stylesheet type=&quot;text/xsl&quot; href=&quot;configuration.xsl&quot;?&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">  Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span></span><br><span class="line"><span class="comment">  you may not use this file except in compliance with the License.</span></span><br><span class="line"><span class="comment">  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment">  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span></span><br><span class="line"><span class="comment">  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment">  See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment">  limitations under the License. See accompanying LICENSE file.</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Put site-specific property overrides in this file. --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 指定mr框架为yarn方式 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><h3 id="修改yarn-site-xml"><a href="#修改yarn-site-xml" class="headerlink" title="修改yarn-site.xml"></a>修改yarn-site.xml</h3><ol><li><p>cd到 <code>hadoop-2.7.7</code> 文件夹下</p><p><code>cd /root/Hadooptools/hadoop-2.7.7/etc/hadoop/</code></p></li><li><p>输入命令，修改 <code>yarn-site.xml</code></p><p><code>vim yarn-site.xml</code></p></li><li><p>将以下内容复制粘贴到文件中：</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Site specific YARN configuration properties --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--指定yarn的老大resoucemanager的地址--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>master<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--NodeManager 获取数据的方式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/UQKtCS.png" alt="UQKtCS"></p></li></ol><h3 id="修改slaves"><a href="#修改slaves" class="headerlink" title="修改slaves"></a>修改slaves</h3><ol><li><p>cd到 <code>hadoop-2.7.7</code> 文件夹下</p><p><code>cd /root/Hadooptools/hadoop-2.7.7/etc/hadoop/</code></p></li><li><p>输入命令，修改 <code>slaves</code></p><p><code>vim slaves</code></p><p>复制粘贴以下内容到文件：</p><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line">master</span><br><span class="line">s1</span><br><span class="line">s2</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/LmHbS1.png" alt="LmHbS1"></p></li></ol><h3 id="建立hadoop-tmp文件夹"><a href="#建立hadoop-tmp文件夹" class="headerlink" title="建立hadoop-tmp文件夹"></a>建立hadoop-tmp文件夹</h3><ol><li><p>cd到 <code>Hadooptools</code> 文件夹下</p><p><code>cd /root/Hadooptools/</code></p></li><li><p>输入命令 <code>mkdir hadoop-tmp</code> 新建文件夹</p></li></ol><h3 id="删除s1，s2上的Hadooptools文件夹"><a href="#删除s1，s2上的Hadooptools文件夹" class="headerlink" title="删除s1，s2上的Hadooptools文件夹"></a>删除s1，s2上的Hadooptools文件夹</h3><ol><li><p>依次在 <code>s1</code>，<code>s2</code> 上执行一下命令，千万别删错了，不要删除在master上的文件夹：</p><p><code>rm -rf /root/Hadooptools/</code></p></li><li><p>将 <code>master</code> 上的 <code>Hadooptools</code>文件夹复制到s1，s2上。</p><p>依次运行以下命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scp -r /root/Hadooptools root@s1:/root/</span><br><span class="line">scp -r /root/Hadooptools root@s2:/root/</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="配置系统环境变量"><a href="#配置系统环境变量" class="headerlink" title="配置系统环境变量"></a>配置系统环境变量</h2><ol><li><p>用vim打开系统环境变量配置文件</p><p><code>vim /root/.bash_profile</code></p></li><li><p>将以下内容添加到文件中</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> HADOOP_HOME=/root/Hadooptools/hadoop-2.7.7</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$&#123;HADOOP_HOME&#125;</span>/bin:<span class="variable">$&#123;HADOOP_HOME&#125;</span>/sbin:</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/XgXFEH.png" alt="XgXFEH"></p><p>然后执行命令 <code>source /root/.bash_profile</code> 使配置生效。</p><p>重复上述操作将s1，s2虚拟机的环境变量也配置成这样。</p></li><li><p>格式化hadoop文件系统</p><blockquote><p>该命令只能在master上执行，且只能执行一次，不可多次执行。</p></blockquote><p><code>hdfs namenode -format</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/5HQJCj.png" alt="5HQJCj"></p><p>当看到如上图中所示 <code>successfully</code> 提示信息则表示格式化成功。</p></li></ol><hr><h2 id="一行命令启动-Hadoop-集群"><a href="#一行命令启动-Hadoop-集群" class="headerlink" title="一行命令启动 Hadoop 集群"></a>一行命令启动 Hadoop 集群</h2><ol><li><p><code>start-all.sh</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/Y7KhT1.png" alt="Y7KhT1"></p></li><li><p>根据提示信息，输入yes</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/Q93lGN.png" alt="Q93lGN"></p></li><li><p>用宿主机浏览器访问 <a target="_blank" rel="noopener" href="http://192.168.141.6:50700/">http://192.168.141.6:50700</a> 查看启动是否成功。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/EBb8fP.png" alt="EBb8fP"></p><p>找到网页中的summary，点开livenodes查看现在是否有3台节点同时在线，如果不是3台，则说明配置有问题，需要重新排错，按照教程前面内容仔细检查，如果显示是3台主机在线，则表明配置成功。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/opuNAa.png" alt="opuNAa"></p></li><li><p>登陆yarn的WebUI <a target="_blank" rel="noopener" href="http://192.168.141.6:8088/">http://192.168.141.6:8088/</a></p></li></ol><hr><h2 id="安装spark"><a href="#安装spark" class="headerlink" title="安装spark"></a>安装spark</h2><ol><li><p>登陆Apache spark官网下载spark</p><p>地址：<a target="_blank" rel="noopener" href="http://spark.apache.org/downloads.html">http://spark.apache.org/downloads.html</a></p><p>选择如下图所示版本进行下载</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/1MPzP1.png" alt="1MPzP1"></p></li><li><p>将下载的压缩包上传到master主机</p><p>在mac终端中输入：</p><p><code>scp /Users/wcooper/Downloads/spark-3.1.1-bin-hadoop2.7.tgz root@192.168.141.6:/root/Hadooptools/</code></p><p>注意下载路径换成自己的。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/nvU8WW.png" alt="nvU8WW"></p></li><li><p>用termius登陆master主机，解压刚刚上传的压缩包</p><ul><li><p>先cd到Hadooptools目录 <code>cd /root/Hadooptools</code></p></li><li><p>然后执行解压缩命令<code>tar -zxvf spark-3.1.1-bin-hadoop2.7.tgz</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/J5WfHX.png" alt="J5WfHX"></p></li></ul></li><li><p>将spark-3.1.1-bin-hadoop2.7文件夹名字修改成spark</p><p><code>mv spark-3.1.1-bin-hadoop2.7 spark</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/mAk8Dk.png" alt="mAk8Dk"></p></li><li><p>修改环境变量，添加spark</p><p>先输入命令编辑.bash_profile <code>vim /root/.bash_profile</code></p><p>然后在末尾添加以下内容：</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> SPARK_HOME=/root/Hadooptools/spark</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;SPARK_HOME&#125;</span>/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/OBLA68.png" alt="OBLA68"></p></li><li><p>输入命令使修改的配置生效：</p><p><code>source /root/.bash_profile</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/Dq9Vow.png" alt="Dq9Vow"></p></li><li><p>编辑spark-env.sh</p><ul><li><p>先进入conf文件夹 <code>cd /root/Hadooptools/spark/conf/</code></p></li><li><p>首先复制一份spark-env.sh，并将其改名 <code>cp spark-env.sh.template spark-env.sh</code></p></li><li><p>编辑spark-env.sh <code>vim spark-env.sh</code></p><p>将以下内容添加到文件中：</p><figure class="highlight sh"><table><tr><td class="code"><pre><span class="line"><span class="built_in">export</span> JAVA_HOME=/root/Hadooptools/jdk1.8.0_171</span><br><span class="line"><span class="built_in">export</span> SPARK_MASTER_IP=192.168.141.6</span><br><span class="line"><span class="built_in">export</span> SPARK_WORKER_MEMORY=1g</span><br><span class="line"><span class="built_in">export</span> HADOOP_CONF_DIR=/root/Hadooptools/hadoop-2.7.7/etc/hadoop</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/14UX9m.png" alt="14UX9m"></p></li></ul></li><li><p>添加s1，s2节点信息</p><p><code>vim /root/Hadooptools/spark/conf/slaves</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/5PIz3i.png" alt="5PIz3i"></p></li><li><p>将spark文件夹复制到s1，s2</p><p>依次运行下面的命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /root/Hadooptools</span><br><span class="line"></span><br><span class="line">scp -r spark root@s1:/root/Hadooptools/</span><br><span class="line"></span><br><span class="line">scp -r spark root@s2:/root/Hadooptools/</span><br></pre></td></tr></table></figure></li><li><p>进入spark文件夹，启动spark</p><p>依次运行以下命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /root/Hadooptools/spark/sbin/</span><br><span class="line"></span><br><span class="line">./start-all.sh</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/9z2Shc.png" alt="9z2Shc"></p></li><li><p>在宿主机的浏览器中访问地址：<a target="_blank" rel="noopener" href="http://192.168.141.6:8080/">http://192.168.141.6:8080</a> ，查看是否能成功访问，如果可以，则spark启动成功。</p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/iTMWqW.png" alt="iTMWqW"></p></li><li><p>测试spark运行是否正常</p><p>依次运行以下命令：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cd /root</span><br><span class="line"></span><br><span class="line">./Hadooptools/spark/bin/spark-submit --class org.apache.spark.examples.SparkPi --master spark://master:7077 /root/Hadooptools/spark/examples//jars/spark-examples_2.12-3.1.1.jar 100</span><br></pre></td></tr></table></figure><p>然后打开spark的WebUI查看运行情况</p><p><a target="_blank" rel="noopener" href="http://192.168.141.6:8080/">http://192.168.141.6:8080</a></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/uUJPdq.png" alt="uUJPdq"></p></li></ol><h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="用mac自带的iterm连接虚拟机"><a href="#用mac自带的iterm连接虚拟机" class="headerlink" title="用mac自带的iterm连接虚拟机"></a>用mac自带的iterm连接虚拟机</h3><p>输入命令 <code>ssh root@192.168.141.6</code></p><p><img src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201019233758.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img@master/uPic/kaIFRS.png" alt="kaIFRS"></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">灯火不休时</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.dhbxs.top/posts/d06540f2.html">https://blog.dhbxs.top/posts/d06540f2.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.dhbxs.top" target="_blank">灯火不休时(blog.dhbxs.top)</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Hadoop/">Hadoop</a></div><div class="post_share"><div class="social-share" data-image="https://www.cleo.com/sites/default/files/2018-10/logo_hadoop_module-11.png" data-sites="wechat, weibo, qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://gitee.com/dhbxs/blogImage/raw/master/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="https://gitee.com/dhbxs/blogImage/raw/master/img/wechat.jpg" alt="微信"></a><div class="post-qr-code-desc">微信</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/6513b849.html"><img class="prev-cover" data-lazy-src="https://img.debuginn.cn/wp-content/uploads/2019/06/bgi-software-1.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">软件工程期末总结</div></div></a></div><div class="next-post pull-right"><a href="/posts/7cb72ad9.html"><img class="next-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20210121144044.png" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">传感器覆盖率仿真软件设计</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20201020000120.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><div class="author-info__name">灯火不休时</div><div class="author-info__description">AI | IoT | Web前端 | Java后端</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">22</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">27</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">12</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/zhao-v"><i class="fab fa-github"></i><span>GitHub</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://blog.csdn.net/ChaoYang_183" target="_blank" title="CSDN"><i class="iconfont iconcsdn1"></i></a><a class="social-icon" href="mailto:1723544366@qq.com" target="_blank" title="Email"><i class="iconfont iconemailFilled"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="iconfont iconrss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">所爱隔山海，山海皆可平;<br>所念隔星河，星河不可及。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-VMWare-Fusion-%E4%BB%A5%E5%8F%8A-TermiusSSH-%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">1.</span> <span class="toc-text">安装 VMWare Fusion 以及 TermiusSSH 客户端</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B8%AD%E5%AE%89%E8%A3%85-CentOS-7"><span class="toc-number">2.</span> <span class="toc-text">在虚拟机中安装 CentOS 7</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-CentOS-7"><span class="toc-number">3.</span> <span class="toc-text">配置 CentOS 7</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8C%E5%AE%8C%E5%96%84ip%E4%B8%8E%E4%B8%BB%E6%9C%BA%E5%90%8D%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">复制虚拟机，完善ip与主机名配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8termius%E8%BF%9E%E6%8E%A53%E5%8F%B0%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="toc-number">5.</span> <span class="toc-text">使用termius连接3台虚拟机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%B6%E4%BD%9C%E5%85%8D%E5%AF%86%E7%A0%81%E7%99%BB%E9%99%86"><span class="toc-number">6.</span> <span class="toc-text">制作免密码登陆</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5"><span class="toc-number">7.</span> <span class="toc-text">配置时间同步</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-Hadoop"><span class="toc-number">8.</span> <span class="toc-text">配置 Hadoop</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9hadoop-env-sh"><span class="toc-number">8.1.</span> <span class="toc-text">修改hadoop-env.sh</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9yarn-env-sh"><span class="toc-number">8.2.</span> <span class="toc-text">修改yarn-env.sh</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9core-site-xml"><span class="toc-number">8.3.</span> <span class="toc-text">修改core-site.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9hdfs-site-xml"><span class="toc-number">8.4.</span> <span class="toc-text">修改hdfs-site.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9mapred-site-xml"><span class="toc-number">8.5.</span> <span class="toc-text">修改mapred-site.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9yarn-site-xml"><span class="toc-number">8.6.</span> <span class="toc-text">修改yarn-site.xml</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9slaves"><span class="toc-number">8.7.</span> <span class="toc-text">修改slaves</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8Bhadoop-tmp%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">8.8.</span> <span class="toc-text">建立hadoop-tmp文件夹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4s1%EF%BC%8Cs2%E4%B8%8A%E7%9A%84Hadooptools%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">8.9.</span> <span class="toc-text">删除s1，s2上的Hadooptools文件夹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-number">9.</span> <span class="toc-text">配置系统环境变量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E8%A1%8C%E5%91%BD%E4%BB%A4%E5%90%AF%E5%8A%A8-Hadoop-%E9%9B%86%E7%BE%A4"><span class="toc-number">10.</span> <span class="toc-text">一行命令启动 Hadoop 集群</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85spark"><span class="toc-number">11.</span> <span class="toc-text">安装spark</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%84%E5%BD%95"><span class="toc-number">12.</span> <span class="toc-text">附录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8mac%E8%87%AA%E5%B8%A6%E7%9A%84iterm%E8%BF%9E%E6%8E%A5%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="toc-number">12.1.</span> <span class="toc-text">用mac自带的iterm连接虚拟机</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/6513b849.html" title="软件工程期末总结"><img data-lazy-src="https://img.debuginn.cn/wp-content/uploads/2019/06/bgi-software-1.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="软件工程期末总结"></a><div class="content"><a class="title" href="/posts/6513b849.html" title="软件工程期末总结">软件工程期末总结</a><time datetime="2021-04-25T13:36:42.000Z" title="发表于 2021-04-25 21:36:42">2021-04-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/d06540f2.html" title="Hadoop 集群搭建（1 主 2 从）"><img data-lazy-src="https://www.cleo.com/sites/default/files/2018-10/logo_hadoop_module-11.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Hadoop 集群搭建（1 主 2 从）"></a><div class="content"><a class="title" href="/posts/d06540f2.html" title="Hadoop 集群搭建（1 主 2 从）">Hadoop 集群搭建（1 主 2 从）</a><time datetime="2021-04-18T07:54:06.000Z" title="发表于 2021-04-18 15:54:06">2021-04-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/7cb72ad9.html" title="传感器覆盖率仿真软件设计"><img data-lazy-src="https://cdn.jsdelivr.net/gh/zhao-v/blog-img/img/20210121144044.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="传感器覆盖率仿真软件设计"></a><div class="content"><a class="title" href="/posts/7cb72ad9.html" title="传感器覆盖率仿真软件设计">传感器覆盖率仿真软件设计</a><time datetime="2021-01-21T06:10:57.000Z" title="发表于 2021-01-21 14:10:57">2021-01-21</time></div></div></div></div></div></div></main><footer id="footer" style="background:linear-gradient(313deg,#ffdee9 0,#b5fffc 100%)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By 灯火不休时</div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://briefcake.com/s/dhbxs">觉得不错·订阅本站</a><br><a target="_blank" rel="noopener" href="https://beian.miit.gov.cn/"><span>晋ICP备2021007495号-1</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",preloader.endLoading())</script><div class="js-pjax"><script>function loadValine(){function e(){new Valine(Object.assign({el:"#vcomment",appId:"Gj4mSRe1Aw0NTWh91D3kTxEP-gzGzoHsz",appKey:"4yNmU6Uk3mDWWu86gOPYEWqv",placeholder:"留下你的足迹吧！",avatar:"monsterid",meta:"nick,mail,link".split(","),pageSize:"10",lang:"zh-CN",recordIP:!0,serverURLs:"",emojiCDN:"",emojiMaps:"",enableQQ:!1,path:window.location.pathname,requiredFields:["nick,mail"],visitor:!1},null))}"function"==typeof Valine?e():getScript("https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js").then(e)}{function loadOtherComment(){loadValine()}btf.loadComment(document.getElementById("vcomment"),loadValine)}</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!0,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors=["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach(e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach(e=>t.setAttribute(e.name,e.value)),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)}),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll(),"object"==typeof preloader&&preloader.endLoading()})),document.addEventListener("pjax:send",(function(){if("object"==typeof preloader&&preloader.initLoading(),window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode")})),document.addEventListener("pjax:error",e=>{404===e.request.status&&pjax.loadUrl("/404.html")})</script></div><script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/hexo-github-calendar@1.21/hexo_githubcalendar.js"></script><script data-pjax>function GithubCalendarConfig(){var t=document.getElementById("recent-posts");t&&"/"==location.pathname&&(console.log("已挂载github calendar"),t.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>')),GithubCalendar("https://python-github-calendar-api.vercel.app/api?zhao-v",["#ebedf0","#fdcdec","#fc9bd9","#fa6ac5","#f838b2","#f5089f","#c4067e","#92055e","#540336","#48022f","#30021f"],"zhao-v")}document.getElementById("recent-posts")&&GithubCalendarConfig()</script><style>#github_container{min-height:280px}@media screen and (max-width:650px){#github_container{min-height:0}}</style><style></style></body></html>